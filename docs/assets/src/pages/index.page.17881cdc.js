import{L as pe}from"../../chunk-1face38c.js";import{d as fe,u as W,g as o,a as s,i,c as l,F as E,b as Y,t as a,s as ge,p as G,f as Ce,M as be,S as H,r as _e,h as he,j as ye,k as we,e as Pe,m as Te}from"../../chunk-177323d6.js";import{r as V,a as z,i as xe,n as Ie,m as Me,E as de,s as Be,C as j,p as ue}from"../../chunk-9798c42c.js";const Ee=a('<select class="mx-2 text-black font-semibold bg-inherit border-b-slate-500 border-b"></select>'),Fe=a("<option></option>"),De=a('<input class="mx-2 text-black font-semibold border-b-slate-500 border-b" type="number">'),Oe=a('<button class="mx-2 hover:underline text-lime-700"></button>'),ze=a('<button class="mx-2 text-red-600 float-right">[X]</button>'),Ae=a('<li class="py-2 clear-both">A container with:<!#><!/><ol class="ml-4"><li>A<!#><!/>CPU with<!#><!/>core<!#><!/> and<!#><!/>MB memory.</li><!#><!/><li class="clear-both"><!#><!/><!#><!/></li></ol></li>'),Le=a('<li class="clear-both"><!#><!/><!#><!/></li>'),je=a("<li>Unknown addon type: <!#><!/></li>"),Ne=a("<div></div>"),Ue=a('<div class="my-4 text-slate-600"><ol class="mb-4"><!#><!/><!#><!/></ol><p>You expect to need<!#><!/>GB/mo network egress traffic across all containers. (None of the providers charge for incoming traffic.)</p><div class="p-4"><input type="checkbox" id="togglefreetier"><label class="select-none ml-1" for="togglefreetier">Include free-tier offerings in the estimation</label></div></div>'),Ge=a("<p>Add container(s) to see estimated prices across a range of PaaS providers:</p>"),Re=e=>(()=>{const t=o(Ee);return t.addEventListener("change",n=>e.onChange(n.target.value)),i(t,l(E,{get each(){return e.options},children:n=>(()=>{const r=o(Fe);return r.value=n,i(r,n),Y(()=>r.selected=e.selected===n),r})()})),t})(),R=e=>(()=>{const t=o(De);return t.addEventListener("change",n=>e.onChange(parseInt(n.target.value,10))),Y(n=>{const r=!!e.wide,_=!e.wide,u=e.step,c=e.min??e.step??1;return r!==n._v$&&t.classList.toggle("w-16",n._v$=r),_!==n._v$2&&t.classList.toggle("w-12",n._v$2=_),u!==n._v$3&&ge(t,"step",n._v$3=u),c!==n._v$4&&ge(t,"min",n._v$4=c),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),Y(()=>t.value=e.value),t})(),$e=e=>(()=>{const t=o(Oe);return t.$$click=()=>e.onClick(),i(t,()=>e.children),_e(),t})(),me=e=>(()=>{const t=o(ze);return he(t,"click",e.onClick,!0),_e(),t})(),Ye=e=>{const[t,n]=W();return(()=>{const r=o(Ae),_=r.firstChild,u=_.nextSibling,[c,S]=s(u.nextSibling),C=c.nextSibling,b=C.firstChild,p=b.firstChild,v=p.nextSibling,[y,T]=s(v.nextSibling),I=y.nextSibling,F=I.nextSibling,[m,f]=s(F.nextSibling),$=m.nextSibling,g=$.nextSibling,[x,w]=s(g.nextSibling),D=x.nextSibling,k=D.nextSibling,[P,ee]=s(k.nextSibling);P.nextSibling;const Q=b.nextSibling,[X,te]=s(Q.nextSibling),N=X.nextSibling,Z=N.firstChild,[q,ne]=s(Z.nextSibling),le=q.nextSibling,[J,ie]=s(le.nextSibling);return i(r,l(me,{onClick:()=>n("stack","containers",G(d=>d.splice(e.index,1)))}),c,S),i(b,l(Re,{options:["shared","dedicated"],get selected(){return e.container.cpuType},onChange:d=>n("stack","containers",e.index,"cpuType",d)}),y,T),i(b,l(R,{get value(){return e.container.cpu},onChange:d=>n("stack","containers",e.index,"cpu",d)}),m,f),i(b,()=>e.container.cpu===1?"":"s",x,w),i(b,l(R,{get value(){return e.container.memory},onChange:d=>n("stack","containers",e.index,"memory",d),wide:!0,step:256}),P,ee),i(C,l(E,{get each(){return e.container.addons},children:(d,U)=>(()=>{const O=o(Le),re=O.firstChild,[K,se]=s(re.nextSibling),ce=K.nextSibling,[B,M]=s(ce.nextSibling);return i(O,l(Ce,{get fallback(){return(()=>{const h=o(je),A=h.firstChild,L=A.nextSibling,[oe,ae]=s(L.nextSibling);return i(h,()=>d.type,oe,ae),h})()},get children(){return[l(be,{get when(){return d.type==="ssd"},get children(){return["An SSD with",l(R,{get value(){return d.size},onChange:h=>n("stack","containers",e.index,"addons",U(),"size",h)}),"GB."]}}),l(be,{get when(){return d.type==="ipv4"},get children(){return[l(R,{get value(){return d.num},onChange:h=>n("stack","containers",e.index,"addons",U(),"num",h)}),"static IPv4 address(es)."]}})]}}),K,se),i(O,l(me,{onClick:()=>n("stack","containers",e.index,"addons",G(h=>h.splice(U(),1)))}),B,M),O})()}),X,te),i(N,l(H,{get when(){return!e.container.addons.find(d=>d.type==="ipv4")},get children(){return l($e,{onClick:()=>n("stack","containers",e.index,"addons",G(d=>d.push({type:"ipv4",num:1}))),children:"[+IPv4]"})}}),q,ne),i(N,l($e,{onClick:()=>n("stack","containers",e.index,"addons",G(d=>d.push({type:"ssd",size:1}))),children:"[+SSD]"}),J,ie),r})()},He=()=>{const[e,t]=W();return(()=>{const n=o(Ne);return i(n,l($e,{onClick:()=>t("stack","containers",G(r=>r.push({cpu:1,cpuType:"shared",memory:256,addons:[],num:1}))),children:"[+Container]"})),n})()},Qe=()=>{const[e,t]=W();return(()=>{const n=o(Ue),r=n.firstChild,_=r.firstChild,[u,c]=s(_.nextSibling),S=u.nextSibling,[C,b]=s(S.nextSibling),p=r.nextSibling,v=p.firstChild,y=v.nextSibling,[T,I]=s(y.nextSibling);T.nextSibling;const F=p.nextSibling,m=F.firstChild;return i(r,l(E,{get each(){return e.stack.containers},get fallback(){return o(Ge)},children:(f,$)=>l(Ye,{container:f,get index(){return $()}})}),u,c),i(r,l(He,{}),C,b),i(p,l(R,{get value(){return e.stack.network.out},onChange:f=>t("stack","network","out",f),min:0}),T,I),m.addEventListener("change",f=>t("stack","useFreeTier",Boolean(f.target.checked))),Y(()=>m.checked=e.stack.useFreeTier),n})()};fe(["click"]);const Xe=(e,t)=>{const n=t.network.in,r=t.network.out,_=0,u=0,c=V(e.prices.net.gbIn,n??0,t.useFreeTier),S=V(e.prices.net.gbOut,r??0,t.useFreeTier),C=z(c,S),b=[],p=[];let v=de;for(let m of t.containers){const f=e.prices.container.find($=>($.limit===1/0||b.filter(g=>g.name===$.name).length<$.limit)&&$.memory>=m.memory&&(m.cpuType==="shared"?$.cpu>=m.cpu||$.cpu<1&&m.cpu===1:$.cpuType==="dedicated"&&$.cpu>=m.cpu)&&(t.useFreeTier?!0:!($.limit&&xe($.cost))));if(f){const $=Ie(f.cost),g=[],x=[];let w=de;for(let k of m.addons)if(k.type==="ssd"){const P=V(e.prices.storage.persistentSsd,k.size,t.useFreeTier);w=z(w,P),g.push({type:"ssd",size:k.size,desired:k,price:P})}else if(k.type==="ipv4"){const P=V(e.prices.staticIp,k.num,t.useFreeTier);w=z(w,P),g.push({type:"ipv4",num:k.num,desired:k,price:P})}else x.push(k);const D=z($,w);b.push({name:f.name,num:1,cpu:f.cpu,cpuType:f.cpuType==="shared"?"shared":"dedicated",memory:f.memory,addons:g,unfulfilledAddons:x,desired:m,basePrice:$,addonsPrice:w,totalPrice:D}),v=z(v,D)}else p.push(m)}const y=z(C,v),T=t.useFreeTier?Me(e.prices.freeCreditsMonthly,y):de,I=z(y,Be(T,-1)),F=(t.useFreeTier?e.prices.freeCredits:0)/I.rate;return{desired:t,provider:e,totalPrice:y,adjustedTotalPrice:I,freeCreditsUsed:T,freeMonths:F,containers:{desired:t.containers,fulfilled:b,unfulfilled:p,totalPrice:v},network:{desired:t.network,netIn:n,netOut:r,unfulfilledNetIn:_,unfulfilledNetOut:u,netInPrice:c,netOutPrice:S,totalPrice:C}}},Ze=a('<h2 class="text-xl m-2 mt-4 text-center">Summary</h2>'),qe=a(`<p class="text-slate-600">Click providers' names to see a detailed cost breakdown below.</p>`),Je=a('<h2 class="text-xl m-2 mt-4 text-center">Cost Breakdown</h2>'),Ke=a('<p class="text-slate-600">Itemized breakdown of the prices summarized above. Quantities are rounded to nearest cent.</p>'),Ve=a(`<p class="text-slate-600 mb-4">Click a provider's name above to see detailed cost breakdowns here!</p>`),We=a('<div class="ml-32 my-2 cursor-pointer"><div class="inline-block align-top w-28"></div><div class="list-decimal inline-block"><!#><!/> <!#><!/></div></div>'),et=a('<div class="my-4"><div class="inline-block align-top w-1/5 border-b border-b-slate-400"></div><ol class="inline-block w-4/5"><li class="border-b border-b-slate-400"></li><li><!#><!/> - Network egress (<!#><!/> GiB/mo)</li><!#><!/><!#><!/></ol></div>'),tt=a("<li>Unable to fulfill desired container specification.</li>"),nt=a("<ol></ol>"),lt=a("<li>-<!#><!/> - Monthly free-tier credit</li>"),it=a("<li><!#><!/> - <!#><!/> (cpu: <!#><!/>, mem: <!#><!/>)<!#><!/><!#><!/></li>"),rt=a("<li><!#><!/> - <!#><!/></li>"),st=()=>{const[e,t]=W(),n=Object.keys(ue),r=ye(()=>n.map(c=>({providerId:c,provider:ue[c],fulfilled:Xe(ue[c],e.stack)}))),[_,u]=we({});return[l(Qe,{}),o(Ze),o(qe),l(E,{get each(){return r()},children:c=>l(ct,Pe(c,{get faded(){return Object.keys(_).length!==0&&!_[c.providerId]},onClick:()=>u(c.providerId,S=>S?void 0:!0)}))}),o(Je),l(H,{get when(){return Object.keys(_).length>0},get fallback(){return o(Ve)},get children(){return[o(Ke),l(E,{get each(){return r()},children:c=>l(H,{get when(){return _[c.providerId]},get children(){return l(ot,c)}})})]}})]},ct=e=>(()=>{const t=o(We),n=t.firstChild,r=n.nextSibling,_=r.firstChild,[u,c]=s(_.nextSibling),S=u.nextSibling,C=S.nextSibling,[b,p]=s(C.nextSibling);return he(t,"click",e.onClick,!0),i(n,()=>e.provider.name),i(r,l(j,{get value(){return e.fulfilled.adjustedTotalPrice}}),u,c),i(r,(()=>{const v=Te(()=>e.fulfilled.freeMonths>0&&e.fulfilled.freeMonths!==1/0);return()=>v()&&`(${e.fulfilled.freeMonths.toFixed(1)} free months)`})(),b,p),Y(()=>t.classList.toggle("text-slate-400",!!e.faded)),_e(),t})(),ot=e=>(()=>{const t=o(et),n=t.firstChild,r=n.nextSibling,_=r.firstChild,u=_.nextSibling,c=u.firstChild,[S,C]=s(c.nextSibling),b=S.nextSibling,p=b.nextSibling,[v,y]=s(p.nextSibling);v.nextSibling;const T=u.nextSibling,[I,F]=s(T.nextSibling),m=I.nextSibling,[f,$]=s(m.nextSibling);return i(n,()=>e.provider.name),i(_,l(j,{get value(){return e.fulfilled.adjustedTotalPrice}})),i(u,l(j,{get value(){return e.fulfilled.network.netOutPrice}}),S,C),i(u,()=>e.fulfilled.network.netOut,v,y),i(r,l(E,{get each(){return e.fulfilled.containers.unfulfilled},children:g=>o(tt)}),I,F),i(r,l(E,{get each(){return e.fulfilled.containers.fulfilled},children:g=>(()=>{const x=o(it),w=x.firstChild,[D,k]=s(w.nextSibling),P=D.nextSibling,ee=P.nextSibling,[Q,X]=s(ee.nextSibling),te=Q.nextSibling,N=te.nextSibling,[Z,q]=s(N.nextSibling),ne=Z.nextSibling,le=ne.nextSibling,[J,ie]=s(le.nextSibling),d=J.nextSibling,U=d.nextSibling,[O,re]=s(U.nextSibling),K=O.nextSibling,[se,ce]=s(K.nextSibling);return i(x,l(j,{get value(){return g.basePrice}}),D,k),i(x,()=>g.name,Q,X),i(x,()=>g.cpu,Z,q),i(x,()=>g.memory>1024?`${g.memory/1024}gb`:`${g.memory}mb`,J,ie),i(x,l(H,{get when(){return g.addons},get children(){const B=o(nt);return i(B,l(E,{get each(){return g.addons},children:M=>(()=>{const h=o(rt),A=h.firstChild,[L,oe]=s(A.nextSibling),ae=L.nextSibling,Se=ae.nextSibling,[ve,ke]=s(Se.nextSibling);return i(h,l(j,{get value(){return M.price}}),L,oe),i(h,()=>M.type==="ipv4"?`${M.num} static IPv4 address${M.num===1?"":"es"}`:`${M.size} GiB persistent SSD`,ve,ke),h})()})),B}}),O,re),i(x,l(H,{get when(){return!xe(e.fulfilled.freeCreditsUsed)},get children(){const B=o(lt),M=B.firstChild,h=M.nextSibling,[A,L]=s(h.nextSibling);return A.nextSibling,i(B,l(j,{get value(){return e.fulfilled.freeCreditsUsed}}),A,L),B}}),se,ce),x})()}),f,$),t})();fe(["click"]);const $t=()=>l(pe,{page:"",get children(){return l(st,{})}});export{$t as Page};
